---

title: nb2medium


keywords: fastai
sidebar: home_sidebar

summary: "Python package and Jupyter extension that enables submitting Medium drafts elegantly from a Jupyter Notebook"
description: "Python package and Jupyter extension that enables submitting Medium drafts elegantly from a Jupyter Notebook"
nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://github.com/lucharo/nb2medium/actions/workflows/main.yml"><img src="https://github.com/lucharo/nb2medium/actions/workflows/main.yml/badge.svg" alt="Testing"></a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>nb2medium represents a simple yet sufficient framework to upload Jupyter notebook to Medium. Its main strenghts are that it makes use of great existing tools such as <code>nbconvert</code> or the <code>requests</code> package for its main functionality. Moreover the package is developed using <code>nbdev</code> from Jeremy Howard and the fastai team, which is claimed to accelerate development an debugging time.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/nb2medium/nb2medium/nbextension/dialog.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>pip install nb2medium</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Then enable the notebook extension by running:</p>
<div class="highlight"><pre><span></span>jupyter notebook install nb2medium --py
jupyter notebook <span class="nb">enable</span> nb2medium --py
</pre></div>
<p>Add <code>--user</code> to these commands if you want to activate the extension only for the current user.\
Add <code>--sys-prefix</code> to these commands if you want to activate the extension only in current virtual environment.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">Setup<a class="anchor-link" href="#Setup"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You will need a Medium Integration token to be able to upload your articles to Medium. If you wish to upload some code blocks as gists, you will need a GitHub token too.
Both token should be available as environment variables, hence we recommend you add these 2 lines to your shell configuration file (<code>~/.bashrc</code> or <code>~/.zshrc</code> are the most common ones):</p>
<div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">MEDIUM_TOKEN</span><span class="o">=</span>&lt;your-medium-token&gt;
<span class="nb">export</span> <span class="nv">GITHUB_TOKEN</span><span class="o">=</span>&lt;your-github-token&gt;
</pre></div>
<p><strong>Obtain an Medium Integration Token from <a href="https://medium.com/me/settings">your Medium settings page</a>\
Obtain a GitHub token by following <a href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">GitHub's docs</a></strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You may choose to use nb2medium as a command line tool, directly from python or using the Jupyter notebook extension button or menu. <em>Note:</em> nb2medium uploads Jupyter notebooks as they are, the notebooks do not get executed before being rendered.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="From-the-Jupyter-notebook">From the Jupyter notebook<a class="anchor-link" href="#From-the-Jupyter-notebook"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You may choose to use the <a href="/nb2medium/upload.html#nb2medium"><code>nb2medium</code></a> under file or the button on the top toolbar</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/nb2medium/nb2medium/nbextension/menu_and_button.png" alt=""></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="From-the-CLI">From the CLI<a class="anchor-link" href="#From-the-CLI"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From the shell (bash, zsh, sh):</p>
<div class="highlight"><pre><span></span>nb2medium <span class="s2">&quot;My article&quot;</span> path/to/notebook.ipynb
</pre></div>
<p>Use <code>nb2medium --help</code> to see all the different options</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="From-python">From python<a class="anchor-link" href="#From-python"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nb2medium.upload</span> <span class="kn">import</span> <span class="n">nb2medium</span>

<span class="n">nb2medium</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;My First Article&#39;</span><span class="p">,</span> <span class="n">notebook</span> <span class="o">=</span> <span class="s1">&#39;../samples/test-notebook.ipynb&#39;</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>converter:INFO - Found a hide-source tag in cell #35.
converter:INFO - Found a hide-output tag in cell #36.
converter:INFO - Found a hide-cell tag in cell #37.
converter:INFO - Gist notebooktest.py from cell 26 succesfully uploaded!
converter:INFO - Gist print.py from cell 27 succesfully uploaded!
converter:INFO - Gist pandas.py from cell 30 succesfully uploaded!
converter:INFO - Gist pandas.py.csv from cell 30 succesfully uploaded!
converter:INFO - Gist pandas-doubleupload.py from cell 33 succesfully uploaded!
converter:INFO - Gist pandas-doubleupload.py.csv from cell 33 succesfully uploaded!
converter:INFO - Detected 4 plots and 2 local images in notebook.
converter:INFO - Markdown document written to ../samples/test-notebook/test-notebook.md
uploader:INFO - Draft of &#39;My First Article&#39; from test-notebook.ipynb notebook uploaded to Medium: https://medium.com/@lucha6/946f9176365b
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Images,-code-cells-and-tables">Images, code cells and tables<a class="anchor-link" href="#Images,-code-cells-and-tables"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Images">Images<a class="anchor-link" href="#Images"> </a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Images usually come from a local file, online site or are the result of a plot. <a href="/nb2medium/upload.html#nb2medium"><code>nb2medium</code></a> can handle these 3 situations. If an image correspond to a local file in markdown cell (e.g. <code>![](path/to/image.png)</code>)</p>
<p>The image is uploaded to the Medium end point and the path to the image is swapped for the newly generated image URL.
If the image is the result of a plot, such as:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</pre></div>
<p>The result of the image is uploaded to the Medium endpoint (without being written to memory) and the corresponding plot is replaced by the plot's URL.</p>
<p>If the image is already online, nothing changes to it, as Medium can access it directly from the internet when loading the article</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Code-cells-as-GitHub-gists">Code cells as GitHub gists<a class="anchor-link" href="#Code-cells-as-GitHub-gists"> </a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>By default a code cell is rendered without syntax highlighting or anything fancy like:</p>

<pre><code>import pandas as pd
pd.DataFrame({'a': [1,2,3], 'b': [2,4,6]})</code></pre>
<p>Though if a GitHub token is available and the user includes the following header in a cell:</p>
<div class="highlight"><pre><span></span><span class="c1"># %gist gistname: pandas.py</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">]})</span>
</pre></div>
<p>The code block will be uploaded to the user's GitHub as a private gist (by default - can be changed to be made public) and the respective code cell will be replaced by the gist URL. The user can also use the <code>description:</code> and the <code>public:</code> flags in the <code>#gist</code> header, where <code>public:</code> maybe either True or False and description can just be a string (no single or double quotes required - just avoid using the keywords <em>gistname, public or description</em>)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Hiding-cells">Hiding cells<a class="anchor-link" href="#Hiding-cells"> </a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It is often convenient to hide either a cell's source (i.e. the code), a cell's output (the result of evaluating the code) or the whole cell altogether. To achieve this the user can place the following header at the start of the relevant cells.</p>
<ul>
<li>To hide a cell's source:<div class="highlight"><pre><span></span><span class="c1"># %hide-source</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This code won&#39;t be shown, but it&#39;s output will&quot;</span><span class="p">)</span>
</pre></div>
</li>
<li>To hide a cell's output:<div class="highlight"><pre><span></span><span class="c1"># %hide-output</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This code will be shown, but it&#39;s output won&#39;t&quot;</span><span class="p">)</span>
</pre></div>
</li>
<li>To hide a cell completely (source and output):<div class="highlight"><pre><span></span><span class="c1"># %hide-cell</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This cell won&#39;t make it to the final document&quot;</span><span class="p">)</span>
</pre></div>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Note:</em> all tags (<code>%hide-*</code> and <code>%gist</code>) were not designed with the idea to be combined so such usage has not been tested. In general there should be no need for such behaviour.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Tables">Tables<a class="anchor-link" href="#Tables"> </a></h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Medium does not have good support for HTML nor Markdown tables. My preferred existing option for tables is <code>gist</code>. If a cell outputs a pandas dataframe and you choose the <code>#%gist</code> option with the value of the <code>upload:</code> flag set to <code>both</code> or <code>output</code>, <code>nd2medium</code> will detect your table and upload it as a CSV to your GitHub gist repo.</p>
<div class="highlight"><pre><span></span><span class="c1">#% gist gistname: pandas.py upload: both</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;One&#39;</span><span class="p">,</span> <span class="s1">&#39;Two&#39;</span><span class="p">,</span> <span class="s1">&#39;Three&#39;</span><span class="p">]})</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Documentation">Documentation<a class="anchor-link" href="#Documentation"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The docs are available at <a href="https://lucharo.github.io/nb2medium">https://lucharo.github.io/nb2medium</a> and are rendered automatically from the <code>nbdev</code> notebooks so they are always up to date with the package source code</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Contributing">Contributing<a class="anchor-link" href="#Contributing"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If you find a bug or think of an enhancement feel free to raise issues or submit pull requests. If you want to contribute to open source projects such as this one have a look at the issues with the label/tag <code>help needed</code> in particular.</p>

</div>
</div>
</div>
</div>
 

